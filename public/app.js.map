{"version":3,"sources":["app/bus.js","app/classes.js","app/firebase.js","app/main.js","app/vue-components.js"],"names":["bus","Vue","methods","on","event","callback","$on","emit","payload","$emit","SNACKBAR","UPDATE_GRID","DOC_SAVED","snackbar","message","console","log","module","exports","id","Osallistuja","obj","luokka","nimi","postino","paikka","vuosi","email","ret","toString","huom","Koulutus","uid","kouluttaja","tilaisuus","pvm","alue","info","lkm","osallistujat","map","push","osall","title","length","toFirebase","Bus","require","Classes","Data","signed_in","koulutukset","users","loading","db","initFirebase","initFirebaseUi","keys","i","koulutus","j","self","oppilasLoader","collection","get","then","size","forEach","data","newKoul","oppilaat","catch","error","user","fb","add","docRef","edit_dialog","doc","set","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebase","initializeApp","firestore","uiConfig","signInSuccessUrl","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","tosUrl","firebaseUi","firebaseui","AuthUI","start","onAuthStateChanged","displayName","emailVerified","photoURL","phoneNumber","providerData","getIdToken","accessToken","getData","dataClass","Components","Firebase","el","tabs","snackbar_text","edit_koulutus","osallistujat_dialog","oppilas_options","columns","width","key","generalFilter","columnFilters","onCreated","component","setData","created","msg","mounted","computed","osallistuja","newKey","date","suffix","indexOf","addKoulutus","location","reload","sign_out","signOut","add_osallistuja","remove_osallistuja","filter","edit","save","editOsallistujat","template","props","localData","options","filters","sortIndicators","cnt","column","localColumn","josSortOrder","type","undefined","name","isLast","c","item","sortKey","initialSort","order","localStorage","josGridColumnFilters","menu","general_filter","sortCol","sortOrder","shownColumns","hidden","filteredSortedData","externalFilters","extFilt","filterByColumn","sort","a","b","josOrder","r","v1","getVal","v2","toggleColumnFilters","rowClick","row_item","onRowClick","ni","col","sortBy","entry","text","toLowerCase","val","accept","formatDate","string","moment","format","classes","all","month","week","my","date_filter","user_filter","kk","vko","omat","kaikkien","dateFilter","f","EVENT_DATE_FILTER","userFilter","EVENT_USER_FILTER"],"mappings":"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","file":"public/app.js","sourcesContent":["var bus = new Vue({\r\n    methods: {\r\n        on: function(event, callback){\r\n            this.$on(event, callback);\r\n        },\r\n        emit: function(event, payload){\r\n            this.$emit(event, payload);\r\n        }\r\n    }\r\n});\r\n\r\nconst SNACKBAR=\"SNACKBAR\";\r\nconst UPDATE_GRID= \"UPDATE_GRID\";\r\nconst DOC_SAVED= \"DOC SAVED\";\r\n\r\nfunction snackbar(message){\r\n    console.log(message);\r\n    bus.emit(SNACKBAR, message);\r\n}\r\n\r\nmodule.exports = {\r\n    bus: bus,\r\n    UPDATE_GRID,\r\n    DOC_SAVED,\r\n    SNACKBAR,\r\n    on: function(event, callback){ bus.on(event, callback)},\r\n    emit: function(event, payload){ bus.emit(event, payload)},\r\n    snackbar: snackbar,\r\n}","var id=1;\r\n\r\n\r\nclass Osallistuja {\r\n    constructor(obj=null){\r\n     this.luokka = \"Osallistuja\";\r\n        if(obj){\r\n            this.id = obj.id;\r\n            this.nimi = obj.nimi;\r\n            this.postino = obj.postino;\r\n            this.paikka = obj.paikka;\r\n            this.vuosi = obj.vuosi;\r\n            this.email = obj.email;\r\n        }\r\n\r\n        if(this.id < 1) this.id = id++;\r\n    }\r\n\r\n    toFirebase(){\r\n        let ret = {};\r\n        ret.nimi = this.nimi ? this.nimi.toString() : \"<puuttuu>\";\r\n        ret.postino = this.postino ? this.postino : \"\";\r\n        ret.vuosi = this.vuosi ? this.vuosi : \"\";\r\n        ret.paikka = this.paikka ? this.paikka : \"\";\r\n        ret.email = this.email ? this.email : \"\";\r\n        ret.huom = this.huom ? this.email : \"\";\r\n        \r\n        return ret;\r\n    }\r\n}\r\n\r\nclass Koulutus {\r\n    constructor(obj=null){\r\n        if(obj){\r\n            this.uid = obj.uid;\r\n            this.id = obj.id;\r\n            this.kouluttaja = obj.kouluttaja;\r\n            this.tilaisuus = obj.tilaisuus;            \r\n            this.pvm = obj.pvm;            \r\n            this.paikka = obj.paikka;            \r\n            this.alue = obj.alue;            \r\n            this.info = obj.info;\r\n            this.lkm = obj.lkm;\r\n            this.osallistujat=[];\r\n            if(obj.osallistujat) obj.osallistujat.map(osall=>{\r\n                this.osallistujat.push(new Osallistuja(osall));\r\n            });\r\n        }\r\n\r\n        if(!this.osallistujat) this.osallistujat = [];\r\n\r\n        if(!this.id) this.id = id++;\r\n\r\n        this.title = this.tilaisuus + \"_\" + this.pvm;\r\n    }\r\n\r\n    create(){\r\n        this.osallistujat.push(new Osallistuja({id: id++}));\r\n    }\r\n\r\n    toFirebase(){\r\n        let ret = {};\r\n\r\n        ret.kouluttaja = this.kouluttaja ? this.kouluttaja : \"<puuttuu>\";\r\n        ret.tilaisuus = this.tilaisuus ? this.tilaisuus : \"<puuttuu>\";\r\n        ret.pvm = this.pvm ? this.pvm : \"1999.01.01\";\r\n        ret.paikka = this.paikka ? this.paikka : \"\";\r\n        ret.alue = this.alue ? this.alue : \"\";\r\n        ret.info = this.info ? this.info : \"\";\r\n        ret.lkm = this.lkm ? this.lkm : this.osallistujat.length;\r\n\r\n        ret.osallistujat = this.osallistujat.map(osall=>osall.toFirebase());\r\n\r\n        return ret;\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    Osallistuja: Osallistuja,\r\n    Koulutus: Koulutus\r\n}","var Bus = require(\"bus\");\r\nvar Classes = require(\"classes\");\r\nvar Osallistuja = Classes.Osallistuja;\r\nvar Koulutus = Classes.Koulutus;\r\n\r\nlet id=1;\r\n\r\nclass Data {\r\n    \r\n    constructor(){\r\n        this.signed_in = false;\r\n        \r\n        this.koulutukset = [];\r\n        this.users = [];\r\n\r\n        this.loading=0;\r\n        this.db = {};\r\n\r\n        this.initFirebase();\r\n        this.initFirebaseUi();\r\n\r\n        this.keys = [];\r\n\r\n    }\r\n\r\n    oppilaat(){\r\n        let ret = [];\r\n        for(let i=0; i<this.koulutukset.length;++i){\r\n            let koulutus = this.koulutukset[i];\r\n            for(let j=0;j<koulutus.osallistujat.length;++j){\r\n                ret.push(koulutus.osallistujat[j]);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    getData(){\r\n        let self = this;\r\n\r\n        self.loading++;\r\n\r\n        let oppilasLoader = 0;\r\n\r\n        this.db.collection(\"koulutukset\").get().then(function(koulutukset) {\r\n            oppilasLoader += koulutukset.size;\r\n            koulutukset.forEach(function(koulutus) {\r\n                // doc.data() is never undefined for query doc snapshots\r\n                console.log(koulutus.id, \" => \", koulutus.data());\r\n\r\n                self.keys.push(koulutus.id);\r\n                let newKoul = koulutus.data();\r\n                newKoul.uid = koulutus.id;\r\n                self.koulutukset.push(new Koulutus(newKoul));\r\n\r\n                oppilasLoader--;\r\n                if(oppilasLoader < 1){\r\n                    Bus.emit(Bus.UPDATE_GRID, self.oppilaat());\r\n                }\r\n            });\r\n        })\r\n        .catch(function(error){\r\n            Bus.snackbar(\"Koulutusten haku epäonnistui: \" + error);\r\n        });           \r\n        self.loading--;\r\n\r\n        self.loading++;\r\n        this.db.collection(\"users\").get().then(function(users) {\r\n            users.forEach(function(user) {\r\n                // doc.data() is never undefined for query doc snapshots\r\n                console.log(user.id, \" => \", user.data());\r\n                self.users.push(user.data());\r\n            });\r\n        })\r\n        .catch(function(error){\r\n            Bus.snackbar(\"Käyttäjien haku epäonnistui: \" + error);\r\n        });           \r\n        self.loading--;\r\n        \r\n    }\r\n\r\n    save(koulutus, callback){\r\n        let self = this;\r\n\r\n        let fb = koulutus.toFirebase();\r\n\r\n        if(!koulutus.uid){\r\n            this.db.collection(\"koulutukset\").add(fb)\r\n            .then(function(docRef){\r\n                self.edit_dialog=false;\r\n                Bus.snackbar(\"Document written with ID: \" + docRef.id);\r\n                self.koulutukset.push(new Koulutus(docRef));\r\n                if(callback) callback();\r\n            })\r\n            .catch(function(error) {\r\n                Bus.snackbar(\"Error adding document: \"+ error);\r\n            });\r\n        } else {\r\n            this.db.collection(\"koulutukset\").doc(koulutus.uid).set(fb)\r\n            .then(function(){\r\n                self.edit_dialog=false;\r\n                Bus.snackbar(\"Document succesfully written!\");\r\n                if(callback) callback();\r\n            })\r\n            .catch(function(error) {\r\n                Bus.snackbar(\"Error writing document: \"+ error);\r\n            });\r\n        }\r\n    }\r\n\r\n    update(koulutus){\r\n        // Vaihdetaan sisäisen listan tieto\r\n        for(let i=0;i<this.koulutukset.length;++i){\r\n            if(this.koulutukset[i].uid == koulutus.id){\r\n                this.koulutukset[i] = koulutus;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    initFirebase(){\r\n        // Initialize Firebase\r\n        var config = {\r\n            apiKey: \"AIzaSyBqnnD4nhjqAPGYSy5c8doBIUhdJQH3fVM\",\r\n            authDomain: \"koulutustirtokanta.firebaseapp.com\",\r\n            databaseURL: \"https://koulutustirtokanta.firebaseio.com\",\r\n            projectId: \"koulutustirtokanta\",\r\n            storageBucket: \"koulutustirtokanta.appspot.com\",\r\n            messagingSenderId: \"437082065797\"\r\n        };\r\n        firebase.initializeApp(config);\r\n        this.db = firebase.firestore();\r\n    };\r\n    \r\n    initFirebaseUi(){\r\n        let self = this;\r\n    \r\n        let uiConfig = {\r\n            signInSuccessUrl: '', //'<url-to-redirect-to-on-success>',\r\n            signInOptions: [\r\n                // Leave the lines as is for the providers you want to offer your users.\r\n                firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n            ],\r\n            // Terms of service url.\r\n            tosUrl: '<your-tos-url>'\r\n        };\r\n      \r\n        this.firebaseUi = new firebaseui.auth.AuthUI(firebase.auth());\r\n    \r\n        // The start method will wait until the DOM is loaded.\r\n        this.firebaseUi.start('#firebaseui-auth-container', uiConfig);  \r\n        \r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user) {\r\n                \r\n                // User is signed in.\r\n                var displayName = user.displayName;\r\n                var email = user.email;\r\n                var emailVerified = user.emailVerified;\r\n                var photoURL = user.photoURL;\r\n                var uid = user.uid;\r\n                var phoneNumber = user.phoneNumber;\r\n                var providerData = user.providerData;\r\n                user.getIdToken().then(function(accessToken) {\r\n                    self.user = user;\r\n                    self.signed_in = true;\r\n                    \r\n                    // document.getElementById('sign-in-status').textContent = 'Signed in';\r\n                    // document.getElementById('sign-in').textContent = 'Sign out';\r\n                });\r\n\r\n                self.getData();\r\n            } else {\r\n                // User is signed out.\r\n                self.signed_in = false;\r\n                self.user = {};\r\n                // document.getElementById('sign-in-status').textContent = 'Signed out';\r\n                // document.getElementById('sign-in').textContent = 'Sign in';\r\n                // document.getElementById('account-details').textContent = 'null';\r\n            }\r\n        }, function(error) {\r\n            console.log(error);\r\n        });\r\n    };\r\n    \r\n}\r\n\r\nvar dataClass=new Data();\r\n\r\nmodule.exports = {\r\n    data: dataClass\r\n}","var Components = require(\"vue-components\");\r\nvar Classes = require(\"classes\");\r\nvar Firebase = require(\"firebase\");\r\nvar Bus = require(\"bus\");\r\n\r\nvar Osallistuja = Classes.Osallistuja;\r\nvar Koulutus = Classes.Koulutus;\r\n\r\n\r\n\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        tabs: null,\r\n\r\n        data: Firebase.data,\r\n\r\n        snackbar: false,\r\n        snackbar_text: \"\",\r\n\r\n        koulutukset: [],\r\n        users: [],\r\n\r\n        edit_dialog: false,\r\n        edit_koulutus: new Koulutus(),\r\n\r\n        osallistujat_dialog: false,\r\n        oppilas_options: {\r\n            columns: [\r\n                { title: 'Nimi', width: \"50%\", key: 'nimi' },\r\n                { title: 'Vuosi', width: \"10%\", key: 'vuosi' },\r\n                { title: 'Email', width: \"10%\", key: 'email' },\r\n            ],\r\n\r\n            generalFilter: true,\r\n            columnFilters: true,\r\n\r\n            onCreated: function(component){\r\n                Bus.on(Bus.UPDATE_GRID, function(data){\r\n                    component.setData(data);\r\n                })\r\n            },\r\n        },\r\n    },\r\n    created(){\r\n        let self=this;\r\n\r\n        Bus.on(Bus.SNACKBAR, function(msg){\r\n            self.snackbar_text = msg;\r\n            self.snackbar = true;\r\n        })\r\n    },\r\n    mounted: function(){\r\n    },  \r\n    computed: {\r\n    },\r\n\r\n    methods: {\r\n        oppilaat(){\r\n            let ret = [];\r\n            console.log(\"Koulutuksia: \" + this.koulutukset.length)\r\n            for(let koulutus of this.koulutukset){\r\n                if(!koulutus.osallistujat) continue;\r\n                koulutus.osallistujat.map(osallistuja=>ret.push(osallistuja));\r\n            }\r\n            return ret;\r\n        },\r\n\r\n        newKey(kouluttaja, tilaisuus, date){\r\n            let suffix=1;\r\n            let key = date + \"_\" + kouluttaja + \"_\" + \"aihe\";\r\n            while(this.keys.indexOf(key + \"_\" + suffix) >= 0){\r\n                suffix++;\r\n            }\r\n\r\n            return key + \"_\" + suffix;\r\n        },\r\n        \r\n\r\n        addKoulutus(){\r\n            \r\n            let key = this.newKey(\"Esko Hannula\", \"Peruskurssi\", \"2018.03.03\");\r\n            this.db.collection(\"koulutukset\").doc(key).set({\r\n                kouluttaja: \"Esko Hannula\",\r\n                tilaisuus: \"Peruskurssi\",\r\n                date: \"2018.03.03\",\r\n            }).then(function(){location.reload()});\r\n\r\n        },\r\n\r\n        sign_out(){\r\n            let self = this;\r\n            firebase.auth().signOut().then(function(){location.reload()});\r\n        },\r\n\r\n        add_osallistuja(){\r\n            this.edit_koulutus.osallistujat.push({ id: id++});\r\n        },\r\n\r\n        remove_osallistuja(osallistuja){\r\n            this.edit_koulutus.osallistujat = this.edit_koulutus.osallistujat.filter(osall=>{ return osall.id !== osallistuja.id;});\r\n        },\r\n\r\n\r\n        edit(koulutus){\r\n            let self = this;\r\n\r\n            this.edit_dialog=true;\r\n            this.edit_koulutus = new Koulutus(koulutus);\r\n        },\r\n\r\n        save(koulutus){\r\n            let self = this;\r\n            this.data.save(koulutus, function(){\r\n                self.edit_dialog = false;\r\n            })\r\n        },\r\n\r\n        editOsallistujat(koulutus){\r\n            this.osallistujat_dialog=true;\r\n        }\r\n\r\n\r\n    }\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n","module.exports=\"compo\";\r\n\r\nVue.component('vue-jos-grid', {\r\n    template: `\r\n    <div class=\"jos-table-container\" style=\"padding: 0px;\">   \r\n\r\n    <input v-if=\"options.generalFilter\" style=\"margin-top: 16px; border: 1px solid #eee;\" type=\"text\" v-model=\"general_filter\" placeholder=\"Hae\">\r\n    <table :class=\"options.luokka\" id=\"jos-grid\" style=\"cursor: pointer;\">                                                                               \r\n        <thead>                                                                                                   \r\n            <tr>                                                                                                  \r\n                <th v-for=\"column in shownColumns\" :class=\"{active: sortCol == column.key}\" :width=\"column.width\">\r\n                    <span @click=\"column.sortable != false && sortBy(column.key)\">{{column.title}}</span>         \r\n                    <span v-if=\"sortIndicators[column.key]==1\" class=\"material-icons\" style=\"font-size: 15px\">arrow_downward</span>                                          \r\n                    <span v-if=\"sortIndicators[column.key]==-1\" class=\"material-icons\" style=\"font-size: 15x\">arrow_upward</span>                                       \r\n\r\n                    <i v-if=\"column.isLast\" style=\"float: right\" class=\"glyphicon glyphicon-filter\" @click=\"toggleColumnFilters()\" title=\"Sarakekohtaiset suodattimet päälle/pois\" />                                                                                  \r\n                    \r\n                    <template v-if=\"columnFilters && column.filterable != false\">                                                  \r\n                        <br><input style=\"width: 80%;\" type=\"text\" v-model=\"filters[column.key]\">                 \r\n                    </template> \r\n                </th>                                                                                             \r\n            </tr>                                                                                                 \r\n        </thead>                                                                                                  \r\n        <tbody>                                                                                                   \r\n            <tr v-for=\"entry in filteredSortedData\" :key=\"entry.josOrder\" @click=\"rowClick(entry)\">            \r\n                <td v-for=\"column in shownColumns\">                                                               \r\n                    <div v-if=\"column.template\" style=\"display: inline-block\" v-html=\"entry[column.key]\"></div>\r\n                    <template v-else>\r\n                        <template v-if=\"column.type == \\'text\\'\">                                                     \r\n                            {{entry[column.key]}}                                                                     \r\n                        </template>                                                                                   \r\n                        <template v-if=\"column.type == \\'number\\'\">                                                   \r\n                            {{entry[column.key]}}                                                                                          \r\n                        </template>                                                                                    \r\n                        <template v-if=\"column.type == \\'link\\'\">                                                     \r\n                            <a :href=\"entry[column.key].href\">{{entry[column.key].text}}</a>                          \r\n                        </template>                                                                                   \r\n                        <template v-if=\"column.type == \\'date\\'\">                                                     \r\n                            {{formatDate(entry[column.key])}}\r\n                        </template>                                                                                   \r\n                    </template>\r\n                </td>                                                                                             \r\n            </tr>                                                                                                 \r\n        </tbody>                                                                                                  \r\n    </table>                                                                                                      \r\n    </div>                \r\n    `,\r\n    props: ['data', 'options'],\r\n\r\n    // columnSetting:\r\n    // {\r\n    //     title: \"Pitkä nimi\",\r\n    //     key: \"nimi\",\r\n    //     type: text / number / date / jotain ihan muuta\r\n    // }\r\n\r\n    data: function () {\r\n        let self = this;\r\n        let localData = [];\r\n        this.options.luokka = {\r\n            'table': false,\r\n            'table-striped': false,\r\n            'table-bordered': false,\r\n            'table-hover': false,\r\n            'table-condensed': false,\r\n\r\n            'jos-table': true,\r\n        };\r\n        \r\n        let columns = [];\r\n        let filters = {};\r\n        let sortIndicators = {};\r\n        let cnt = 1;\r\n        if(this.options && this.options.columns){\r\n            this.options.columns.forEach(function (column) {\r\n                let localColumn = column;\r\n                localColumn.josSortOrder=0;\r\n                if(column.type == undefined) localColumn.type = \"text\";\r\n                if(column.name == undefined) localColumn.name = column.key;\r\n                columns.push(localColumn);\r\n                sortIndicators[column.key]=0;\r\n                localColumn.isLast = (cnt++ == self.options.columns.length-1);\r\n            });\r\n        }\r\n\r\n        let c=1;\r\n        if(this.data){\r\n            this.data.forEach(function(item){\r\n                item['josOrder'] = c++;\r\n\r\n                self.options.columns.forEach(function (column) {\r\n                    if(column.template != undefined){\r\n                        item[column.key] = column.template(item);\r\n                    }\r\n                });\r\n                localData.push(item);\r\n            });\r\n        }\r\n\r\n        let sortKey = '';\r\n        if(this.options.initialSort){\r\n            sortIndicators[this.options.initialSort.key] = this.options.initialSort.order; //sortIndicators['pvm']=-1;\r\n            sortKey = this.options.initialSort.key;\r\n        }\r\n\r\n        let columnFilters = this.options.columnFilters;\r\n        if(localStorage.josGridColumnFilters) columnFilters = localStorage.josGridColumnFilters;\r\n        if(typeof(columnFilters) === 'undefined') columnFilters = false;\r\n\r\n        return {\r\n            columnFilters: columnFilters,\r\n            menu: false,\r\n            general_filter: \"\",\r\n            localData: localData,\r\n            sortCol:  sortKey,\r\n            sortOrder: -1,\r\n            columns: columns,\r\n            sortIndicators: sortIndicators,\r\n            filters: filters,\r\n        }\r\n    },\r\n\r\n    created: function(){\r\n        if(this.options.onCreated) this.options.onCreated(this);\r\n\r\n        if(this.options.columnFilters != true) this.options.columnFilters = false;\r\n        if(this.options.generalFilter != true) this.options.generalFilter = false;\r\n    },\r\n\r\n    computed: {\r\n        shownColumns: function(){\r\n            return this.columns.filter(function(item){ return item.hidden != true});\r\n        },\r\n        \r\n        filteredSortedData: function(){\r\n            let self = this;\r\n            let ret = this.localData;\r\n            \r\n            if(this.options.externalFilters){\r\n                for(let extFilt of this.options.externalFilters){\r\n                    ret = extFilt(ret);\r\n                }\r\n            }\r\n\r\n            for(let i=0;i<this.columns.length;++i){\r\n                let column = this.columns[i];\r\n                ret = this.filterByColumn(column, ret);\r\n            }\r\n\r\n            for(let i=0;i<this.columns.length;++i){\r\n                let column = this.columns[i];\r\n                if(column.name == this.sortCol){\r\n                    if(this.sortOrder == 0){\r\n                        ret = ret.sort(function(a,b){\r\n                            return a.josOrder-b.josOrder;\r\n                        });\r\n                    } else {\r\n                        ret = ret.sort(function(a,b){\r\n                            let r = 0;\r\n                            let v1 = self.getVal(column, a[column.key]);\r\n                            let v2 = self.getVal(column, b[column.key]); \r\n\r\n                            if(v1 < v2) r=-1;    \r\n                            else if(v1 > v2) r=1;\r\n                            return r*self.sortOrder;\r\n                        });    \r\n                    }\r\n                }\r\n            }\r\n\r\n            ret = this.generalFilter(ret);\r\n\r\n            return ret;\r\n        },\r\n    },\r\n    methods: {\r\n        toggleColumnFilters(){\r\n            this.columnFilters = !this.columnFilters;\r\n            \r\n            localStorage.josGridColumnFilters = this.columnFilters;\r\n        },\r\n        \r\n        rowClick: function(row_item){\r\n            if(this.options.onRowClick) this.options.onRowClick(row_item);\r\n        },\r\n        \r\n        setData: function(data){\r\n            let self=this;\r\n            let localData = [];\r\n            let c=1;\r\n            if(data){\r\n                data.forEach(function(item){\r\n                    let ni = {};\r\n                    ni['josOrder'] = c++;\r\n    \r\n                    var col = 0;\r\n                    self.options.columns.forEach(function (column) {\r\n                        if(column.template != undefined){\r\n                            ni[column.key] = column.template(item);\r\n                        } else {\r\n                            ni[column.key] = item[column.key];\r\n                        }\r\n                    });\r\n                    localData.push(ni);\r\n                });\r\n            }\r\n    \r\n            self.localData = localData;\r\n        },\r\n        \r\n        sortBy: function (key) {\r\n            this.sortIndicators = {};\r\n            if(this.sortCol != key){\r\n                this.sortCol = key;\r\n                this.sortOrder = 1;\r\n            } else {\r\n                if(this.sortOrder == 1) this.sortOrder = -1;\r\n                else if(this.sortOrder == -1) this.sortOrder = 0;\r\n                else if(this.sortOrder == 0) this.sortOrder = 1;\r\n            }\r\n            this.sortIndicators[key] = this.sortOrder;\r\n        },\r\n        getVal: function(column, entry){\r\n            if(entry == null || entry == undefined) entry = \"\";\r\n            if(column.type == 'link') return entry.text.toLowerCase();\r\n            return entry.toLowerCase();\r\n        },\r\n        filterByColumn: function(column, data){\r\n            let self=this;\r\n            let filter = this.filters[column.key];\r\n            if(filter == undefined || filter.length < 1) return data;\r\n            filter = filter.toLowerCase();\r\n            let ret = data; \r\n          \r\n            ret = ret.filter(function(item){\r\n                let val = self.getVal(column, item[column.key]);\r\n                if(val == undefined) val = \"\";\r\n                val=val.toString().toLowerCase();\r\n                return val.indexOf(filter) > -1;\r\n            });\r\n            return ret;\r\n        },\r\n        generalFilter: function(data){\r\n            if(this.general_filter.length < 1) return data;\r\n\r\n            let self=this;\r\n            let filter = this.general_filter.toLowerCase();\r\n            let ret = data; \r\n          \r\n            ret = ret.filter(function(item){\r\n                let accept=false;\r\n                for(let col of self.columns){\r\n                    if(col.hidden) continue;\r\n                    let val = self.getVal(col, item[col.key]);\r\n                    val = val.toString().toLowerCase();\r\n                    if(val.indexOf(filter) > -1){\r\n                        accept=true;\r\n                        break;\r\n                    }\r\n                }\r\n                return accept;\r\n            });\r\n            return ret;\r\n        },\r\n        formatDate: function(string){\r\n            return moment(string).format(\"DD.MM.YYYY\");\r\n        }\r\n    },\r\n});\r\n\r\n\r\n\r\n\r\nVue.component('vue-grid-filters', {\r\n    template:` \r\n    <div style=\"margin-right: 5px; margin-top: 10px; margin-bottom: 10px; float: right;\">\r\n        <div class=\"btn-group\" style=\"margin-right: 15px;\">                                                                                                                                                                             \r\n            <button type=\"button\" @click=\"dateFilter('ALL')\" :class=\"classes.all\">Kaikki</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"dateFilter('MONTH')\" :class=\"classes.kk\">Kuukausi</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"dateFilter('WEEK')\" :class=\"classes.vko\">Viikko</button>                                                                                                                                                                                   \r\n        </div>                                                                                                                                                                            \r\n        <div class=\"btn-group\">                                                                                                                                                                             \r\n            <button type=\"button\" @click=\"userFilter('MY')\" :class=\"classes.omat\">Omat</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"userFilter('ALL')\" :class=\"classes.kaikkien\">Kaikkien</button>                                                                                                                                                                                   \r\n        </div>                \r\n    </div>                                                                                                                                                            \r\n    `,\r\n    props: ['date_filter', 'user_filter', 'jos'],\r\n    data: function(){\r\n        return {\r\n        }\r\n    },\r\n    computed: {\r\n        classes(){\r\n            let all=false;\r\n            let month = false;\r\n            let week = false;\r\n            let my = false;\r\n            if(this.date_filter == 'ALL') all = true;\r\n            if(this.date_filter == 'MONTH') month = true;\r\n            if(this.date_filter == 'WEEK') week = true;\r\n            if(this.user_filter == 'MY') my = true;\r\n\r\n            let ret = {\r\n                all: {\r\n                    'btn': true,\r\n                    'btn-default': !all,\r\n                    'btn-primary': all,\r\n                    'btn-xs': true,\r\n                },\r\n                kk: {\r\n                    'btn': true,\r\n                    'btn-default': !month,\r\n                    'btn-primary': month,\r\n                    'btn-xs': true,\r\n                },\r\n                vko: {\r\n                    'btn': true,\r\n                    'btn-default': !week,\r\n                    'btn-primary': week,\r\n                    'btn-xs': true,\r\n                },\r\n    \r\n                omat: {\r\n                    'btn': true,\r\n                    'btn-default': !my,\r\n                    'btn-primary': my,\r\n                    'btn-xs': true,\r\n                },\r\n                kaikkien: {\r\n                    'btn': true,\r\n                    'btn-default': my,\r\n                    'btn-primary': !my,\r\n                    'btn-xs': true,\r\n                },\r\n            };\r\n            return ret;\r\n        },\r\n    },\r\n    methods: {\r\n        dateFilter(f){\r\n            bus.emit(EVENT_DATE_FILTER, f);\r\n        },\r\n\r\n        userFilter(f){\r\n            bus.emit(EVENT_USER_FILTER, f);\r\n        },\r\n    }\r\n});\r\n"]}
{"version":3,"sources":["app/classes.js","app/firebase.js","app/main.js","app/vue-components.js"],"names":["id","Osallistuja","obj","nimi","postino","paikka","vuosi","email","Koulutus","uid","kouluttaja","tilaisuus","pvm","alue","info","lkm","osallistujat","map","osall","module","exports","Classes","require","Data","signed_in","koulutukset","users","loading","db","initFirebase","initFirebaseUi","keys","self","oppilasLoader","collection","get","then","size","forEach","koulutus","console","log","data","push","newKoul","bus","emit","UPDATE_GRID","oppilaat","catch","error","snackbar_text","snackbar","user","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebase","initializeApp","firestore","uiConfig","signInSuccessUrl","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","tosUrl","firebaseUi","firebaseui","AuthUI","start","onAuthStateChanged","displayName","emailVerified","photoURL","phoneNumber","providerData","getIdToken","accessToken","getData","dataClass","Components","Firebase","Vue","methods","on","event","callback","$on","payload","$emit","el","tabs","edit_dialog","edit_koulutus","osallistujat_dialog","oppilas_options","columns","title","width","key","generalFilter","columnFilters","onCreated","component","setData","created","mounted","computed","ret","length","osallistuja","newKey","date","suffix","indexOf","addKoulutus","doc","set","location","reload","sign_out","signOut","add_osallistuja","remove_osallistuja","filter","save","add","docRef","edit","editOsallistujat","template","props","localData","options","luokka","filters","sortIndicators","cnt","column","localColumn","josSortOrder","type","undefined","name","isLast","c","item","sortKey","initialSort","order","localStorage","josGridColumnFilters","menu","general_filter","sortCol","sortOrder","shownColumns","hidden","filteredSortedData","externalFilters","extFilt","i","filterByColumn","sort","a","b","josOrder","r","v1","getVal","v2","toggleColumnFilters","rowClick","row_item","onRowClick","ni","col","sortBy","entry","text","toLowerCase","val","toString","accept","formatDate","string","moment","format","classes","all","month","week","my","date_filter","user_filter","kk","vko","omat","kaikkien","dateFilter","f","EVENT_DATE_FILTER","userFilter","EVENT_USER_FILTER"],"mappings":"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","file":"public/app.js","sourcesContent":["var id=1;\r\n\r\n\r\nclass Osallistuja {\r\n    constructor(obj=null){\r\n        if(obj){\r\n            this.id = obj.id;\r\n            this.nimi = obj.nimi;\r\n            this.postino = obj.postino;\r\n            this.paikka = obj.paikka;\r\n            this.vuosi = obj.vuosi;\r\n            this.email = obj.email;\r\n        }\r\n\r\n        if(this.id < 1) this.id = id++;\r\n    }\r\n}\r\n\r\nclass Koulutus {\r\n    constructor(obj=null){\r\n        if(obj){\r\n            this.uid = obj.uid;\r\n            this.id = obj.id;\r\n            this.kouluttaja = obj.kouluttaja;\r\n            this.tilaisuus = obj.tilaisuus;            \r\n            this.pvm = obj.pvm;            \r\n            this.paikka = obj.paikka;            \r\n            this.alue = obj.alue;            \r\n            this.info = obj.info;\r\n            this.lkm = obj.lkm;\r\n            this.osallistujat = obj.osallistujat;            \r\n            if(this.osallistujat) this.osallistujat.map(osall=>{\r\n                osall.id=id++;\r\n            });\r\n        }\r\n\r\n        if(!this.id) this.id = id++;\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    Osallistuja: Osallistuja,\r\n    Koulutus: Koulutus\r\n}","var Classes = require(\"classes\");\r\nvar Osallistuja = Classes.Osallistuja;\r\nvar Koulutus = Classes.Koulutus;\r\n\r\n\r\nclass Data {\r\n    \r\n    constructor(){\r\n        this.signed_in = false;\r\n        \r\n        this.koulutukset = [];\r\n        this.users = [];\r\n\r\n        this.loading=0;\r\n        this.db = {};\r\n\r\n        this.initFirebase();\r\n        this.initFirebaseUi();\r\n\r\n        this.keys = [];\r\n\r\n    }\r\n\r\n    getData(){\r\n        let self = this;\r\n\r\n        self.loading++;\r\n\r\n        let oppilasLoader = 0;\r\n\r\n        this.db.collection(\"koulutukset\").get().then(function(koulutukset) {\r\n            oppilasLoader += koulutukset.size;\r\n            koulutukset.forEach(function(koulutus) {\r\n                // doc.data() is never undefined for query doc snapshots\r\n                console.log(koulutus.id, \" => \", koulutus.data());\r\n\r\n                self.keys.push(koulutus.id);\r\n                let newKoul = koulutus.data();\r\n                newKoul.uid = koulutus.id;\r\n                self.koulutukset.push(new Koulutus(newKoul));\r\n\r\n                oppilasLoader--;\r\n                if(oppilasLoader < 1){\r\n                    bus.emit(UPDATE_GRID, self.oppilaat());\r\n                }\r\n            });\r\n        })\r\n        .catch(function(error){\r\n            console.log(\"Koulutusten haku epäonnistui: \" + error);\r\n            self.snackbar_text = \"Koulutusten haku epäonnistui: \" + error;\r\n            self.snackbar = true;\r\n        });           \r\n        self.loading--;\r\n\r\n        self.loading++;\r\n        this.db.collection(\"users\").get().then(function(users) {\r\n            users.forEach(function(user) {\r\n                // doc.data() is never undefined for query doc snapshots\r\n                console.log(user.id, \" => \", user.data());\r\n                self.users.push(user.data());\r\n            });\r\n        })\r\n        .catch(function(error){\r\n            console.log(\"Käyttäjien haku epäonnistui: \" + error);\r\n            self.snackbar_text = \"Käyttäjien haku epäonnistui: \" + error;\r\n            self.snackbar = true;\r\n        });           \r\n        self.loading--;\r\n        \r\n    }\r\n\r\n    initFirebase(){\r\n        // Initialize Firebase\r\n        var config = {\r\n            apiKey: \"AIzaSyBqnnD4nhjqAPGYSy5c8doBIUhdJQH3fVM\",\r\n            authDomain: \"koulutustirtokanta.firebaseapp.com\",\r\n            databaseURL: \"https://koulutustirtokanta.firebaseio.com\",\r\n            projectId: \"koulutustirtokanta\",\r\n            storageBucket: \"koulutustirtokanta.appspot.com\",\r\n            messagingSenderId: \"437082065797\"\r\n        };\r\n        firebase.initializeApp(config);\r\n        this.db = firebase.firestore();\r\n    };\r\n    \r\n    initFirebaseUi(){\r\n        let self = this;\r\n    \r\n        let uiConfig = {\r\n            signInSuccessUrl: '', //'<url-to-redirect-to-on-success>',\r\n            signInOptions: [\r\n                // Leave the lines as is for the providers you want to offer your users.\r\n                firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n            ],\r\n            // Terms of service url.\r\n            tosUrl: '<your-tos-url>'\r\n        };\r\n      \r\n        this.firebaseUi = new firebaseui.auth.AuthUI(firebase.auth());\r\n    \r\n        // The start method will wait until the DOM is loaded.\r\n        this.firebaseUi.start('#firebaseui-auth-container', uiConfig);  \r\n        \r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user) {\r\n                \r\n                // User is signed in.\r\n                var displayName = user.displayName;\r\n                var email = user.email;\r\n                var emailVerified = user.emailVerified;\r\n                var photoURL = user.photoURL;\r\n                var uid = user.uid;\r\n                var phoneNumber = user.phoneNumber;\r\n                var providerData = user.providerData;\r\n                user.getIdToken().then(function(accessToken) {\r\n                    self.user = user;\r\n                    self.signed_in = true;\r\n                    \r\n                    // document.getElementById('sign-in-status').textContent = 'Signed in';\r\n                    // document.getElementById('sign-in').textContent = 'Sign out';\r\n                });\r\n\r\n                self.getData();\r\n            } else {\r\n                // User is signed out.\r\n                self.signed_in = false;\r\n                self.user = {};\r\n                // document.getElementById('sign-in-status').textContent = 'Signed out';\r\n                // document.getElementById('sign-in').textContent = 'Sign in';\r\n                // document.getElementById('account-details').textContent = 'null';\r\n            }\r\n        }, function(error) {\r\n            console.log(error);\r\n        });\r\n    };\r\n    \r\n}\r\n\r\nvar dataClass=new Data();\r\n\r\nmodule.exports = {\r\n    data: dataClass\r\n}","var Components = require(\"vue-components\");\r\nvar Classes = require(\"classes\");\r\nvar Firebase = require(\"firebase\");\r\n\r\nvar Osallistuja = Classes.Osallistuja;\r\nvar Koulutus = Classes.Koulutus;\r\n\r\n\r\nconst UPDATE_GRID = \"UPDATE_GRID\";\r\n\r\nvar bus = new Vue({\r\n    methods: {\r\n        on: function(event, callback){\r\n            this.$on(event, callback);\r\n        },\r\n        emit: function(event, payload){\r\n            this.$emit(event, payload);\r\n        }\r\n    }\r\n});\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        tabs: null,\r\n\r\n        data: Firebase.data,\r\n\r\n        snackbar: false,\r\n        snackbar_text: \"\",\r\n\r\n        koulutukset: [],\r\n        users: [],\r\n\r\n        edit_dialog: false,\r\n        edit_koulutus: { osallistujat: []},\r\n\r\n        osallistujat_dialog: false,\r\n        oppilas_options: {\r\n            columns: [\r\n                { title: 'Nimi', width: \"50%\", key: 'nimi' },\r\n                { title: 'Vuosi', width: \"10%\", key: 'vuosi' },\r\n                { title: 'Email', width: \"10%\", key: 'email' },\r\n            ],\r\n\r\n            generalFilter: true,\r\n            columnFilters: true,\r\n\r\n            onCreated: function(component){\r\n                bus.on(UPDATE_GRID, function(data){\r\n                    component.setData(data);\r\n                })\r\n            },\r\n        },\r\n    },\r\n    created(){\r\n    },\r\n    mounted: function(){\r\n    },  \r\n    computed: {\r\n    },\r\n\r\n    methods: {\r\n        oppilaat(){\r\n            let ret = [];\r\n            console.log(\"Koulutuksia: \" + this.koulutukset.length)\r\n            for(let koulutus of this.koulutukset){\r\n                if(!koulutus.osallistujat) continue;\r\n                koulutus.osallistujat.map(osallistuja=>ret.push(osallistuja));\r\n            }\r\n            return ret;\r\n        },\r\n\r\n        newKey(kouluttaja, tilaisuus, date){\r\n            let suffix=1;\r\n            let key = date + \"_\" + kouluttaja + \"_\" + \"aihe\";\r\n            while(this.keys.indexOf(key + \"_\" + suffix) >= 0){\r\n                suffix++;\r\n            }\r\n\r\n            return key + \"_\" + suffix;\r\n        },\r\n        \r\n\r\n        addKoulutus(){\r\n            \r\n            let key = this.newKey(\"Esko Hannula\", \"Peruskurssi\", \"2018.03.03\");\r\n            this.db.collection(\"koulutukset\").doc(key).set({\r\n                kouluttaja: \"Esko Hannula\",\r\n                tilaisuus: \"Peruskurssi\",\r\n                date: \"2018.03.03\",\r\n            }).then(function(){location.reload()});\r\n\r\n        },\r\n\r\n        sign_out(){\r\n            let self = this;\r\n            firebase.auth().signOut().then(function(){location.reload()});\r\n        },\r\n\r\n        add_osallistuja(){\r\n            this.edit_koulutus.osallistujat.push({ id: id++});\r\n        },\r\n\r\n        remove_osallistuja(osallistuja){\r\n            this.edit_koulutus.osallistujat = this.edit_koulutus.osallistujat.filter(osall=>{ return osall.id !== osallistuja.id;});\r\n        },\r\n\r\n        save(koulutus){\r\n            let self = this;\r\n\r\n            if(!koulutus.uid){\r\n                this.db.collection(\"koulutukset\").add({\r\n                    nimi: this.edit_koulutus.nimi,\r\n                    osallistujat: this.edit_koulutus.osallistujat,\r\n                })\r\n                .then(function(docRef){\r\n                    self.edit_dialog=false;\r\n                    self.snackbar_text = \"Document written with ID: \" + docRef.id;\r\n                    self.snackbar=true;\r\n                })\r\n                .catch(function(error) {\r\n                    self.snackbar_text=\"Error adding document: \"+ error;\r\n                    self.snackbar=true;\r\n                });\r\n            } else {\r\n                this.db.collection(\"koulutukset\").doc(this.edit_koulutus.uid).set({\r\n                    kouluttaja: this.edit_koulutus.kouluttaja,\r\n                    osallistujat: this.edit_koulutus.osallistujat,\r\n                })\r\n                .then(function(){\r\n                    self.edit_dialog=false;\r\n                    self.snackbar_text=\"Document succesfully written!\";\r\n                    self.snackbar=true;\r\n                })\r\n                .catch(function(error) {\r\n                    self.snackbar_text=\"Error writing document: \"+ error;\r\n                    self.snackbar=true;\r\n                });\r\n            }\r\n        },\r\n\r\n        edit(koulutus){\r\n            let self = this;\r\n\r\n            this.edit_dialog=true;\r\n            this.edit_koulutus = new Koulutus(koulutus);\r\n        },\r\n\r\n        editOsallistujat(koulutus){\r\n            this.osallistujat_dialog=true;\r\n        }\r\n\r\n\r\n    }\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n","module.exports=\"compo\";\r\n\r\nVue.component('vue-jos-grid', {\r\n    template: `\r\n    <div class=\"jos-table-container\" style=\"padding: 0px;\">   \r\n\r\n    <input v-if=\"options.generalFilter\" style=\"margin-top: 16px; border: 1px solid #eee;\" type=\"text\" v-model=\"general_filter\" placeholder=\"Hae\">\r\n    <table :class=\"options.luokka\" id=\"jos-grid\" style=\"cursor: pointer;\">                                                                               \r\n        <thead>                                                                                                   \r\n            <tr>                                                                                                  \r\n                <th v-for=\"column in shownColumns\" :class=\"{active: sortCol == column.key}\" :width=\"column.width\">\r\n                    <span @click=\"column.sortable != false && sortBy(column.key)\">{{column.title}}</span>         \r\n                    <span v-if=\"sortIndicators[column.key]==1\" class=\"material-icons\" style=\"font-size: 15px\">arrow_downward</span>                                          \r\n                    <span v-if=\"sortIndicators[column.key]==-1\" class=\"material-icons\" style=\"font-size: 15x\">arrow_upward</span>                                       \r\n\r\n                    <i v-if=\"column.isLast\" style=\"float: right\" class=\"glyphicon glyphicon-filter\" @click=\"toggleColumnFilters()\" title=\"Sarakekohtaiset suodattimet päälle/pois\" />                                                                                  \r\n                    \r\n                    <template v-if=\"columnFilters && column.filterable != false\">                                                  \r\n                        <br><input style=\"width: 80%;\" type=\"text\" v-model=\"filters[column.key]\">                 \r\n                    </template> \r\n                </th>                                                                                             \r\n            </tr>                                                                                                 \r\n        </thead>                                                                                                  \r\n        <tbody>                                                                                                   \r\n            <tr v-for=\"entry in filteredSortedData\" :key=\"entry.josOrder\" @click=\"rowClick(entry)\">            \r\n                <td v-for=\"column in shownColumns\">                                                               \r\n                    <div v-if=\"column.template\" style=\"display: inline-block\" v-html=\"entry[column.key]\"></div>\r\n                    <template v-else>\r\n                        <template v-if=\"column.type == \\'text\\'\">                                                     \r\n                            {{entry[column.key]}}                                                                     \r\n                        </template>                                                                                   \r\n                        <template v-if=\"column.type == \\'number\\'\">                                                   \r\n                            {{entry[column.key]}}                                                                                          \r\n                        </template>                                                                                    \r\n                        <template v-if=\"column.type == \\'link\\'\">                                                     \r\n                            <a :href=\"entry[column.key].href\">{{entry[column.key].text}}</a>                          \r\n                        </template>                                                                                   \r\n                        <template v-if=\"column.type == \\'date\\'\">                                                     \r\n                            {{formatDate(entry[column.key])}}\r\n                        </template>                                                                                   \r\n                    </template>\r\n                </td>                                                                                             \r\n            </tr>                                                                                                 \r\n        </tbody>                                                                                                  \r\n    </table>                                                                                                      \r\n    </div>                \r\n    `,\r\n    props: ['data', 'options'],\r\n\r\n    // columnSetting:\r\n    // {\r\n    //     title: \"Pitkä nimi\",\r\n    //     key: \"nimi\",\r\n    //     type: text / number / date / jotain ihan muuta\r\n    // }\r\n\r\n    data: function () {\r\n        let self = this;\r\n        let localData = [];\r\n        this.options.luokka = {\r\n            'table': false,\r\n            'table-striped': false,\r\n            'table-bordered': false,\r\n            'table-hover': false,\r\n            'table-condensed': false,\r\n\r\n            'jos-table': true,\r\n        };\r\n        \r\n        let columns = [];\r\n        let filters = {};\r\n        let sortIndicators = {};\r\n        let cnt = 1;\r\n        if(this.options && this.options.columns){\r\n            this.options.columns.forEach(function (column) {\r\n                let localColumn = column;\r\n                localColumn.josSortOrder=0;\r\n                if(column.type == undefined) localColumn.type = \"text\";\r\n                if(column.name == undefined) localColumn.name = column.key;\r\n                columns.push(localColumn);\r\n                sortIndicators[column.key]=0;\r\n                localColumn.isLast = (cnt++ == self.options.columns.length-1);\r\n            });\r\n        }\r\n\r\n        let c=1;\r\n        if(this.data){\r\n            this.data.forEach(function(item){\r\n                item['josOrder'] = c++;\r\n\r\n                self.options.columns.forEach(function (column) {\r\n                    if(column.template != undefined){\r\n                        item[column.key] = column.template(item);\r\n                    }\r\n                });\r\n                localData.push(item);\r\n            });\r\n        }\r\n\r\n        let sortKey = '';\r\n        if(this.options.initialSort){\r\n            sortIndicators[this.options.initialSort.key] = this.options.initialSort.order; //sortIndicators['pvm']=-1;\r\n            sortKey = this.options.initialSort.key;\r\n        }\r\n\r\n        let columnFilters = this.options.columnFilters;\r\n        if(localStorage.josGridColumnFilters) columnFilters = localStorage.josGridColumnFilters;\r\n        if(typeof(columnFilters) === 'undefined') columnFilters = false;\r\n\r\n        return {\r\n            columnFilters: columnFilters,\r\n            menu: false,\r\n            general_filter: \"\",\r\n            localData: localData,\r\n            sortCol:  sortKey,\r\n            sortOrder: -1,\r\n            columns: columns,\r\n            sortIndicators: sortIndicators,\r\n            filters: filters,\r\n        }\r\n    },\r\n\r\n    created: function(){\r\n        if(this.options.onCreated) this.options.onCreated(this);\r\n\r\n        if(this.options.columnFilters != true) this.options.columnFilters = false;\r\n        if(this.options.generalFilter != true) this.options.generalFilter = false;\r\n    },\r\n\r\n    computed: {\r\n        shownColumns: function(){\r\n            return this.columns.filter(function(item){ return item.hidden != true});\r\n        },\r\n        \r\n        filteredSortedData: function(){\r\n            let self = this;\r\n            let ret = this.localData;\r\n            \r\n            if(this.options.externalFilters){\r\n                for(let extFilt of this.options.externalFilters){\r\n                    ret = extFilt(ret);\r\n                }\r\n            }\r\n\r\n            for(let i=0;i<this.columns.length;++i){\r\n                let column = this.columns[i];\r\n                ret = this.filterByColumn(column, ret);\r\n            }\r\n\r\n            for(let i=0;i<this.columns.length;++i){\r\n                let column = this.columns[i];\r\n                if(column.name == this.sortCol){\r\n                    if(this.sortOrder == 0){\r\n                        ret = ret.sort(function(a,b){\r\n                            return a.josOrder-b.josOrder;\r\n                        });\r\n                    } else {\r\n                        ret = ret.sort(function(a,b){\r\n                            let r = 0;\r\n                            let v1 = self.getVal(column, a[column.key]);\r\n                            let v2 = self.getVal(column, b[column.key]); \r\n\r\n                            if(v1 < v2) r=-1;    \r\n                            else if(v1 > v2) r=1;\r\n                            return r*self.sortOrder;\r\n                        });    \r\n                    }\r\n                }\r\n            }\r\n\r\n            ret = this.generalFilter(ret);\r\n\r\n            return ret;\r\n        },\r\n    },\r\n    methods: {\r\n        toggleColumnFilters(){\r\n            this.columnFilters = !this.columnFilters;\r\n            \r\n            localStorage.josGridColumnFilters = this.columnFilters;\r\n        },\r\n        \r\n        rowClick: function(row_item){\r\n            if(this.options.onRowClick) this.options.onRowClick(row_item);\r\n        },\r\n        \r\n        setData: function(data){\r\n            let self=this;\r\n            let localData = [];\r\n            let c=1;\r\n            if(data){\r\n                data.forEach(function(item){\r\n                    let ni = {};\r\n                    ni['josOrder'] = c++;\r\n    \r\n                    var col = 0;\r\n                    self.options.columns.forEach(function (column) {\r\n                        if(column.template != undefined){\r\n                            ni[column.key] = column.template(item);\r\n                        } else {\r\n                            ni[column.key] = item[column.key];\r\n                        }\r\n                    });\r\n                    localData.push(ni);\r\n                });\r\n            }\r\n    \r\n            self.localData = localData;\r\n        },\r\n        \r\n        sortBy: function (key) {\r\n            this.sortIndicators = {};\r\n            if(this.sortCol != key){\r\n                this.sortCol = key;\r\n                this.sortOrder = 1;\r\n            } else {\r\n                if(this.sortOrder == 1) this.sortOrder = -1;\r\n                else if(this.sortOrder == -1) this.sortOrder = 0;\r\n                else if(this.sortOrder == 0) this.sortOrder = 1;\r\n            }\r\n            this.sortIndicators[key] = this.sortOrder;\r\n        },\r\n        getVal: function(column, entry){\r\n            if(entry == null || entry == undefined) entry = \"\";\r\n            if(column.type == 'link') return entry.text.toLowerCase();\r\n            return entry.toLowerCase();\r\n        },\r\n        filterByColumn: function(column, data){\r\n            let self=this;\r\n            let filter = this.filters[column.key];\r\n            if(filter == undefined || filter.length < 1) return data;\r\n            filter = filter.toLowerCase();\r\n            let ret = data; \r\n          \r\n            ret = ret.filter(function(item){\r\n                let val = self.getVal(column, item[column.key]);\r\n                if(val == undefined) val = \"\";\r\n                val=val.toString().toLowerCase();\r\n                return val.indexOf(filter) > -1;\r\n            });\r\n            return ret;\r\n        },\r\n        generalFilter: function(data){\r\n            if(this.general_filter.length < 1) return data;\r\n\r\n            let self=this;\r\n            let filter = this.general_filter.toLowerCase();\r\n            let ret = data; \r\n          \r\n            ret = ret.filter(function(item){\r\n                let accept=false;\r\n                for(let col of self.columns){\r\n                    if(col.hidden) continue;\r\n                    let val = self.getVal(col, item[col.key]);\r\n                    val = val.toString().toLowerCase();\r\n                    if(val.indexOf(filter) > -1){\r\n                        accept=true;\r\n                        break;\r\n                    }\r\n                }\r\n                return accept;\r\n            });\r\n            return ret;\r\n        },\r\n        formatDate: function(string){\r\n            return moment(string).format(\"DD.MM.YYYY\");\r\n        }\r\n    },\r\n});\r\n\r\n\r\n\r\n\r\nVue.component('vue-grid-filters', {\r\n    template:` \r\n    <div style=\"margin-right: 5px; margin-top: 10px; margin-bottom: 10px; float: right;\">\r\n        <div class=\"btn-group\" style=\"margin-right: 15px;\">                                                                                                                                                                             \r\n            <button type=\"button\" @click=\"dateFilter('ALL')\" :class=\"classes.all\">Kaikki</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"dateFilter('MONTH')\" :class=\"classes.kk\">Kuukausi</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"dateFilter('WEEK')\" :class=\"classes.vko\">Viikko</button>                                                                                                                                                                                   \r\n        </div>                                                                                                                                                                            \r\n        <div class=\"btn-group\">                                                                                                                                                                             \r\n            <button type=\"button\" @click=\"userFilter('MY')\" :class=\"classes.omat\">Omat</button>                                                                                                                                                                                   \r\n            <button type=\"button\" @click=\"userFilter('ALL')\" :class=\"classes.kaikkien\">Kaikkien</button>                                                                                                                                                                                   \r\n        </div>                \r\n    </div>                                                                                                                                                            \r\n    `,\r\n    props: ['date_filter', 'user_filter', 'jos'],\r\n    data: function(){\r\n        return {\r\n        }\r\n    },\r\n    computed: {\r\n        classes(){\r\n            let all=false;\r\n            let month = false;\r\n            let week = false;\r\n            let my = false;\r\n            if(this.date_filter == 'ALL') all = true;\r\n            if(this.date_filter == 'MONTH') month = true;\r\n            if(this.date_filter == 'WEEK') week = true;\r\n            if(this.user_filter == 'MY') my = true;\r\n\r\n            let ret = {\r\n                all: {\r\n                    'btn': true,\r\n                    'btn-default': !all,\r\n                    'btn-primary': all,\r\n                    'btn-xs': true,\r\n                },\r\n                kk: {\r\n                    'btn': true,\r\n                    'btn-default': !month,\r\n                    'btn-primary': month,\r\n                    'btn-xs': true,\r\n                },\r\n                vko: {\r\n                    'btn': true,\r\n                    'btn-default': !week,\r\n                    'btn-primary': week,\r\n                    'btn-xs': true,\r\n                },\r\n    \r\n                omat: {\r\n                    'btn': true,\r\n                    'btn-default': !my,\r\n                    'btn-primary': my,\r\n                    'btn-xs': true,\r\n                },\r\n                kaikkien: {\r\n                    'btn': true,\r\n                    'btn-default': my,\r\n                    'btn-primary': !my,\r\n                    'btn-xs': true,\r\n                },\r\n            };\r\n            return ret;\r\n        },\r\n    },\r\n    methods: {\r\n        dateFilter(f){\r\n            bus.emit(EVENT_DATE_FILTER, f);\r\n        },\r\n\r\n        userFilter(f){\r\n            bus.emit(EVENT_USER_FILTER, f);\r\n        },\r\n    }\r\n});\r\n"]}